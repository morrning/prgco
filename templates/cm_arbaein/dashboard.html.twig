{% extends 'cm_arbaein/base.html.twig' %}

{% block title %}داشبورد اپراتوری اربعین{% endblock %}

{% block pageBody %}
    <div class="row">
        <div class="col-sm-12 col-md-8">
            <div class="card">
                <div class="card-header bg-primary text-light">
                    اطلاعات آماری
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-12 col-md-6">
                            <p>
                                ناحیه کاربری:
                                <span class="text-success">{{ area.areaName }}</span>
                            </p>
                            <p>
                                تعداد کل افراد ثبت شده:
                                <span class="text-success">{{ total }}</span>
                            </p>
                            <p>
                                تعداد افراد حاضر:
                                <span class="text-success">{{ online }}</span>
                                نفر (
                                {{ menCount }}
                                مرد و
                                {{ womenCount }}
                                زن )
                            </p>
                        </div>
                        <div class="col-sm-12 col-md-6">
                            <div class="col-sm-12 col-md-6">
                                <div class="chart-container">
                                    <canvas id="myChart"></canvas>
                                </div>
                                <script>
                                    var ctx = document.getElementById('myChart');
                                    var color = Chart.helpers.color;
                                    Chart.defaults.global.defaultFontFamily = 'Shabnam FD';
                                    window.chartColors = {
                                        red: 'rgb(255, 99, 132)',
                                        orange: 'rgb(255, 159, 64)',
                                        yellow: 'rgb(255, 205, 86)',
                                        green: 'rgb(75, 192, 192)',
                                        blue: 'rgb(54, 162, 235)',
                                        purple: 'rgb(153, 102, 255)',
                                        grey: 'rgb(201, 203, 207)'
                                    };
                                    var myChart = new Chart(ctx, {
                                        type: 'pie',
                                        data: {
                                            labels: ['مرد','زن'],
                                            datasets: [
                                                {
                                                    borderWidth: 1,
                                                    data: [
                                                        {{ menCount }},
                                                        {{ womenCount }}
                                                    ],
                                                    backgroundColor: [
                                                        color(window.chartColors.blue).alpha(0.5).rgbString(),
                                                        color(window.chartColors.red).alpha(0.5).rgbString(),
                                                        color(window.chartColors.grey).alpha(0.5).rgbString(),
                                                        color(window.chartColors.yellow).alpha(0.5).rgbString(),
                                                    ]

                                                }

                                            ]
                                        }
                                    });
                                </script>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
